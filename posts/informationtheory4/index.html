<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.54.0" />

    
    
    

<title>Information Theory #4 - Airline Route Map • Ivan&#39;s Blog</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Information Theory #4 - Airline Route Map"/>
<meta name="twitter:description" content="Analysis of Airline Route Map from the Japanese Olympiad in Informatics Spring Camp 2018"/>

<meta property="og:title" content="Information Theory #4 - Airline Route Map" />
<meta property="og:description" content="Analysis of Airline Route Map from the Japanese Olympiad in Informatics Spring Camp 2018" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ivaniscoding.github.io/posts/informationtheory4/" />
<meta property="article:published_time" content="2018-08-26T20:00:00-03:00"/>
<meta property="article:modified_time" content="2018-08-26T20:00:00-03:00"/><meta property="og:site_name" content="Ivan&#39;s blog" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.6a83d62c39a364f036df4db1ecd564645635d6c7fc182425cb501218fec485f5.css" integrity="sha256-aoPWLDmjZPA2302x7NVkZFY11sf8GCQly1ASGP7EhfU=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://ivaniscoding.github.io/">Ivan&#39;s Blog</a>
      </span>
      
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Ivan&#39;s Blog</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	
	
	<a href="https://github.com/ivaniscoding" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	<a href="https://linkedin.com/in/ivan-carvalho" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    

<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    <article>
  <header>
    <h1>Information Theory #4 - Airline Route Map</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Aug 26, 2018
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/information-theory">INFORMATION THEORY</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/algorithms">algorithms</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 6 min read
</div>


  </header>
  
  
  <div class="post">
    

<p>I am writing a series of posts about Information Theory problems. You may find the previous one <a href="/posts/informationtheory3/">here</a>.</p>

<p>The problem we will analyze is Airline Route Map from the Japanese Olympiad in Informatics Spring Camp (JOI SC 2018). You may find the problem statement and a place to submit <a href="https://oj.uz/problem/view/JOI18_airline">here</a> .</p>

<p>A synthesis of the problem statement is : Alice needs to send to Bob an undirected graph of N vertices (N &lt;= 1000) and M edges (M &lt;= N*(N-1)/2). However, the information Alice sends suffers a series of shuffles before Bob receives it</p>

<ul>
<li>The number of the vertices are changed. So each of the N vertices will receive a new unique number from 0 to N-1.</li>
<li>The edge list is shuffled. The edges remain consistent to the information you sent (if you sent A-&gt;B, then it will mean A* -&gt; B*, where A* and B* are the new numbers for A and B) , but their order on the edge list is not the same.</li>
<li>The direction of the edge is changed. If it was A-&gt;B , then you may receive A*-&gt;B* or B*-&gt;A*</li>
</ul>

<p>You may add or remove vertices and edges when you are sending the graph as Alice. When Bob receives the shuffled information, he needs to recove the original graph Alice wanted to send. You must submit two files:</p>

<ul>
<li>One that given the undirected graph we want to send, generates a new graph and sends it.</li>
<li>One that given the shuffled sent graph, recovers the original one
The scoring is based on the number of extra vertices you sent. The final subtasks uses only 12 extra vertices to recover the graph.</li>
</ul>

<p>This time I will not focus on the subtasks but only at two solutions : one that uses 13 vertices and the improvement of this solution that uses 12 vertices.</p>

<h2 id="a-question-add-or-remove-edges">A question : add or remove edges ?</h2>

<p>We are allowed to send any graph, so we must choose if we will add or remove edges (or do both). It turns out that it is very hard to recover information of edges that were not sent using few additional vertices. So it is better to send the original graph with some additional vertices that will help to recover the original numbering of the vertices.</p>

<h2 id="first-step-how-to-recover-the-numbers">First step : how to recover the numbers ?</h2>

<p>The first challenge is to recover the original numbers with such few extra vertices. This requires an efficient way of sending information.</p>

<p>It turns that sending the binary representation of the numbers is a good idea. To do that, we create 10 extra vertices, one for each possible set bit of a number. Then, we connect the i-th extra vertex to the numbers whose i-th bit is set.</p>

<p><img src="/img/InformationTheory4/airline0.png" alt="Connection to bits" /></p>

<p>The image above does not show all the bits, but represent the connections of vertex 6 : it has an edge to the vertices that represent 2^1 and 2^2, but not to the one that is 2^0.</p>

<h2 id="second-step-identifying-the-bit-vertices">Second step : identifying the bit vertices</h2>

<p>The next challenge is to identify those special vertices. My idea to solve this was to create an additional vertex that is connected to all vertices of the graph, except to the bit ones.</p>

<p><img src="/img/InformationTheory4/airline1.png" alt="Additional vertex connected to everything except bits" /></p>

<p>In addition to that, I also connected the bit vertices to form a chain , connecting the i-th one to the (i+1)-th one.</p>

<p><img src="/img/InformationTheory4/airline2.png" alt="Bit chain" /></p>

<p>So now we only need to identify the 10th bit vertex and the special vertex that is connected to all the nodes. If we do that, we can always discover the next bit of the chain and we have solve our problem.</p>

<h2 id="third-step-identifying-the-last-bit-vertex-and-the-special-vertex">Third step : identifying the last bit vertex and the special vertex</h2>

<p>We have already used 11 extra vertices, so we do not want to use a lot more in order to identify these two vertices. So we must find some special property or implicit information that can helps us decode without sending many vertices.</p>

<p>One important piece of information that we have not used so far is the degree of the vertices. If we analyze the degrees, we discover an important property : for N &gt;= 3, all of the vertices but two will always have their degree bigger than or equal to 2. The only two vertices that sometimes can break the rule are the vertex 0, when it does not have any edge in the original graph,  and the 10th bit vertex when N &lt;= 512.</p>

<p><img src="/img/InformationTheory4/airline3.png" alt="A trick for the two cases" /></p>

<p>Therefore, it is a good idea to use two extra vertices with degree one to try identify the special and bit vertex, because they will be unique in our graph. With the extra one degree vertex, the 10th bit vertex no longer can have a degree one. The only remaining vertex that can mess up with our idea is 0.</p>

<p>However, it is easy to overcome the problem with 0 : we can simply make the graph 1-indexed instead of 0-indexed. That way, 0 will become one and have a set bit, thus having a degree of at least two.</p>

<p>In the end , we do as follows : we make the graph 1-indexed and add the two 1-degree vertices. Then , we identify the two vertices that are connected to the 1-degree vertices and distinguish the special vertex based on the degree (the special one will always have more edges). Then , we process our chain of bits, discover the original numbering for each vertex and report the original graph. This algorithm uses 13 additional vertices and scores 91 points, which is a very good result.</p>

<h2 id="fourth-step-final-optimization">Fourth step : final optimization</h2>

<p>In order to fully solve the problem, we must get rid of exactly one extra vertex. Therefore, we will need to use again implicit information that we did not use before.</p>

<p>It turns out that we do not need the 1-degree vertex to identify the last bit vertex. Of all the bit vertices (that can be easily identified because of the special vertex), it will always be the one that has the smallest degree.</p>

<p>Because of that, we drop the 1-degree vertex that connects to the last bit and tweak the algorithm we used before. Notice that by doing this, the 10th bit vertex can sometimes have only one edge, but with some thinking we can handle this case.</p>

<p>In my implementation of this idea, I hard coded small cases to avoid corner cases. The remaining part of the code implements exactly the same idea as described above.</p>

<script type="application/javascript" src="//gist.github.com/IvanIsCoding/32cb88cb0ae2c60ee4d2e42b8bfdfef3.js"></script>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/informationtheory3/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Information Theory #3 - Broken Device</span>
    </a>
    
    
    <a href="/posts/informationtheory5/" class="navigation-next">
      <span class="navigation-tittle">Information Theory #5 - City</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    
<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
